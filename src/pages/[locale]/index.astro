---
import { locales, type Locale } from "@/i18n/config";
import { notFound } from "@/lib/http";

export function getStaticPaths() {
  return locales.map((locale) => ({ params: { locale } }));
}

const localeParam = Astro.params.locale?.toLowerCase();
const locale = locales.find((candidate) => candidate === localeParam) as Locale | undefined;

if (!locale) {
  return notFound();
}

return Astro.redirect(`/${locale}/blog/`, 308);
---
